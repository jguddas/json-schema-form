"use strict";(self.webpackChunk_remote_com_dragon=self.webpackChunk_remote_com_dragon||[]).push([[4],{"./src/components/Form/DynamicForm/FormDraft.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js");var formik__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/formik/dist/formik.esm.js"),next_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/next/router.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/index.js"),_data_layer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./data-layer/index.js"),_src_components_Form_DynamicForm_helpers__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Form/DynamicForm/helpers.jsx"),FormDraft=function FormDraft(_ref){var draft=_ref.draft,fields=_ref.fields,router=(0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)(),_useFormikContext=(0,formik__WEBPACK_IMPORTED_MODULE_3__.u6)(),values=_useFormikContext.values,submitCount=_useFormikContext.submitCount,isSubmitting=_useFormikContext.isSubmitting,errors=_useFormikContext.errors,formDraftMutation=(0,_data_layer__WEBPACK_IMPORTED_MODULE_6__.kU)("/api/v1/form_draft/[formName]");return(0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){function handleBeforeUnload(){if(!(0!==submitCount&&isSubmitting||(0,_src_components_Form_DynamicForm_helpers__WEBPACK_IMPORTED_MODULE_7__.AK)(values))){var parseFn=draft.saveParsingFn||_src_components_Form_DynamicForm_helpers__WEBPACK_IMPORTED_MODULE_7__.fI,draftValues=!1===draft.saveParsingFn?draft.values:parseFn(values,fields);formDraftMutation.mutate({bodyParams:{draft:draftValues},pathParams:{formName:draft.id}})}}return router.events.on("routeChangeStart",handleBeforeUnload),function(){router.events.off("routeChangeStart",handleBeforeUnload)}}),[router,draft,submitCount,fields,values,isSubmitting,formDraftMutation,errors]),null};FormDraft.propTypes={draft:prop_types__WEBPACK_IMPORTED_MODULE_8___default().shape({id:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string.isRequired,values:prop_types__WEBPACK_IMPORTED_MODULE_8___default().object}),fields:prop_types__WEBPACK_IMPORTED_MODULE_8___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_8___default().object).isRequired};const __WEBPACK_DEFAULT_EXPORT__=FormDraft}}]);